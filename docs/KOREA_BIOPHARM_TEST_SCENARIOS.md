# 한국바이오팜 모듈 테스트 시나리오

## 시나리오 1: 면역력 강화 정제 개발

### 배경
중소 건강기능식품 회사에서 면역력 강화를 위한 정제 제품을 개발하려고 합니다.
- 목표: 합리적인 가격대의 면역력 강화 제품
- 타겟: 30-50대 직장인
- 예산: 제조 원가 15,000원 이하

### 테스트 단계

#### 1단계: 제품 정보 입력
```
제품명: 면역력 강화 정제
제형: 정제 (드롭다운에서 선택)
목표 원가: 15000
목표 중량: 1000
제품 설명: 직장인을 위한 면역력 강화 건강기능식품
```

#### 2단계: 원료 요구사항
**필수 원료:**
1. 비타민C
   - 최소%: 30
   - 최대%: 50
   - 필수: ✓

2. 아연
   - 최소%: 10
   - 최대%: 20
   - 필수: ✓

**선택 원료:**
3. 비타민D
   - 최소%: 5
   - 최대%: 15
   - 필수: ☐

#### 3단계: 제약 조건
```
최대 원료 수: 10
피해야 할 원료: 이산화티타늄, 합성착색료
품질 요구사항: 비건 인증, 무첨가
```

#### 4단계: 검색 실행
- "유사 제품 검색" 버튼 클릭
- 내부 DB + 식품안전나라 API 결과 확인

#### 5단계: 프롬프트 확인
- 생성된 프롬프트 펼쳐보기
- 내부 DB 검색 SQL 쿼리 확인
- 유사제품 목록 확인

#### 6단계: AI 배합비 자동 생성
- "AI 배합비 자동 생성" 버튼 클릭
- 로딩 인디케이터 확인 (스피너)
- 3가지 옵션 자동 생성 대기

#### 7단계: 결과 확인
**3가지 옵션 카드 표시 확인:**
- ✅ 원가 최적화 (green) - 12,000원/세트
- ✅ 프리미엄 품질 (purple) - 18,500원/세트
- ✅ 균형 (추천) (blue) - 15,000원/세트

**각 옵션 클릭 시:**
- 배합비 테이블 표시
- No, 원료명, 배합비(%), 역할 컬럼
- 총 배합비 100.00% 확인
- 예상 원가 표시
- 제조 시 주의사항 표시
- 예상 품질 표시

#### 8단계: 피드백 저장
- 옵션 선택: "균형 (추천)"
- 평점: ⭐⭐⭐⭐⭐ (5점)
- 추가 의견: "타겟 가격대에 잘 맞고 기능성 원료 함량도 적절함"
- "결과 저장하기" 버튼 클릭
- 저장 완료 메시지 확인

---

## 시나리오 2: 프리미엄 루테인 캡슐 개발

### 배경
프리미엄 브랜드에서 눈 건강을 위한 고급 루테인 캡슐을 개발합니다.
- 목표: 최고 품질의 루테인 제품
- 타겟: 40-60대 고소득층
- 예산: 제조 원가 25,000원

### 테스트 단계

#### 1단계: 제품 정보 입력
```
제품명: 프리미엄 루테인 골드
제형: 연질캡슐
목표 원가: 25000
목표 중량: 1200
제품 설명: 눈 건강을 위한 프리미엄 루테인 복합 제품
```

#### 2단계: 원료 요구사항
**필수 원료:**
1. 루테인
   - 최소%: 20
   - 최대%: 40
   - 필수: ✓

2. 지아잔틴
   - 최소%: 5
   - 최대%: 10
   - 필수: ✓

**선택 원료:**
3. 오메가3
   - 최소%: 10
   - 최대%: 30
   - 필수: ☐

4. 비타민E
   - 최소%: 5
   - 최대%: 15
   - 필수: ☐

#### 3단계: 제약 조건
```
최대 원료 수: 8
피해야 할 원료: (없음)
품질 요구사항: 프리미엄 원료, 특허 원료, GMP 인증
```

#### 4-8단계: 동일하게 진행

**예상 결과:**
- 프리미엄 옵션 선택 가능성 높음
- 고급 원료 (킬레이트, 특허 원료) 포함
- 생체이용률 높은 배합비

---

## 시나리오 3: 저가형 종합비타민 정제

### 배경
대형마트 PB 상품으로 들어갈 저가형 종합비타민 개발
- 목표: 가격 경쟁력
- 타겟: 20-30대 일반 소비자
- 예산: 제조 원가 8,000원 이하

### 테스트 단계

#### 1단계: 제품 정보 입력
```
제품명: 데일리 종합비타민
제형: 정제
목표 원가: 8000
목표 중량: 800
제품 설명: 가성비 좋은 일일 종합비타민
```

#### 2단계: 원료 요구사항
**필수 원료:**
1. 비타민C
   - 최소%: 20
   - 필수: ✓

2. 비타민B군
   - 최소%: 15
   - 필수: ✓

**선택 원료:**
3. 칼슘
   - 최소%: 10
   - 필수: ☐

#### 3단계: 제약 조건
```
최대 원료 수: 12
피해야 할 원료: (없음)
품질 요구사항: 가격 최우선, 기본 품질 보장
```

**예상 결과:**
- 원가 최적화 옵션 선택 가능성 높음
- 기본 원료 사용
- 경제적인 배합비

---

## 시나리오 4: 프로바이오틱스 분말 제품

### 배경
장 건강을 위한 프로바이오틱스 분말 제품 개발
- 목표: 효능과 섭취 편의성
- 타겟: 전 연령층
- 예산: 제조 원가 20,000원

### 테스트 단계

#### 1단계: 제품 정보 입력
```
제품명: 장건강 프로바이오틱스
제형: 분말
목표 원가: 20000
목표 중량: 2000
제품 설명: 장내 유익균 증식을 위한 프로바이오틱스
```

#### 2단계: 원료 요구사항
**필수 원료:**
1. 프로바이오틱스
   - 최소%: 25
   - 최대%: 40
   - 필수: ✓

2. 프리바이오틱스
   - 최소%: 15
   - 최대%: 30
   - 필수: ✓

**선택 원료:**
3. 유산균
   - 최소%: 10
   - 최대%: 20
   - 필수: ☐

#### 3단계: 제약 조건
```
최대 원료 수: 8
피해야 할 원료: 설탕, 합성감미료
품질 요구사항: 프리미엄 균주, 장용성 코팅
```

---

## 에러 처리 테스트 시나리오

### 시나리오 5: 잘못된 입력 처리

#### 테스트 케이스 1: 필수 필드 누락
1. 제품명 입력 없이 "유사 제품 검색" 클릭
2. **예상 결과**: "제품명을 입력해주세요." 에러 메시지

#### 테스트 케이스 2: 원료 비율 오류
1. 최소% > 최대% 입력 (예: 최소 50%, 최대 30%)
2. **예상 결과**: 유효성 검증 (현재 미구현, 향후 추가 가능)

#### 테스트 케이스 3: 네트워크 오류
1. 백엔드 서버 중지 상태에서 "AI 배합비 자동 생성" 클릭
2. **예상 결과**: "AI 배합비 생성 중 오류가 발생했습니다." 에러 메시지

#### 테스트 케이스 4: 배합비 파싱 오류
1. Mock 응답을 잘못된 형식으로 변경
2. **예상 결과**: "배합비 생성 실패" 화면 표시

---

## 성능 테스트 시나리오

### 시나리오 6: 대량 원료 입력

#### 테스트 단계
1. 원료 15개 추가
2. 각 원료마다 최소/최대 비율 입력
3. "유사 제품 검색" 실행
4. **확인사항**:
   - 검색 속도 (<3초)
   - UI 반응성
   - 프롬프트 생성 품질

### 시나리오 7: 반복 사용

#### 테스트 단계
1. 첫 번째 제품 완료
2. "새 배합비 추천받기" 클릭
3. 다른 제품 입력
4. **확인사항**:
   - 상태 초기화 정상 작동
   - 이전 데이터 남아있지 않음
   - 메모리 누수 없음

---

## UI/UX 테스트 체크리스트

### 제품 정보 입력 화면
- [ ] 제품명 입력 필드 작동
- [ ] 제형 드롭다운 선택 가능
- [ ] 목표 원가/중량 숫자 입력 가능
- [ ] 제품 설명 textarea 작동
- [ ] 필드 포커스 시 파란색 테두리 표시
- [ ] 텍스트 색상 명확하게 보임

### 원료 요구사항
- [ ] "원료 추가" 버튼 작동
- [ ] 원료명 자동완성 작동
- [ ] 최소%/최대% 입력 가능
- [ ] 필수 체크박스 토글 작동
- [ ] 삭제 버튼 작동 (2개 이상일 때)
- [ ] 레이아웃 비율 정상 (원료명 50%, 최소/최대 각 16%)

### 제약 조건
- [ ] 최대 원료 수 입력 가능
- [ ] 피해야 할 원료 쉼표 구분 입력
- [ ] 품질 요구사항 쉼표 구분 입력

### 유사 제품 검색 결과
- [ ] 내부 DB 결과 테이블 표시
- [ ] 공공 API 결과 테이블 표시
- [ ] "다음 단계" 버튼으로 프롬프트 단계 이동

### 프롬프트 생성 화면
- [ ] 프롬프트 기본 접힌 상태
- [ ] 클릭 시 펼쳐짐/접힘 (화살표 회전)
- [ ] "복사" 버튼 작동
- [ ] "AI 배합비 자동 생성" 버튼 표시
- [ ] 로딩 중 스피너 표시
- [ ] "이전 단계" 버튼 작동

### AI 배합비 결과 화면
- [ ] 3가지 옵션 카드 표시
- [ ] 각 옵션별 원료 수, 총 배합비, 예상 원가 표시
- [ ] 옵션 선택 시 하이라이트 (초록/보라/파란)
- [ ] 선택된 옵션의 배합비 테이블 표시
- [ ] 테이블: No, 원료명, 배합비(%), 역할 컬럼
- [ ] 합계 행: 100.00% 확인
- [ ] 예상 원가 표시
- [ ] 제조 시 주의사항 표시
- [ ] 예상 품질 표시
- [ ] 평점 선택 (1-5점)
- [ ] 추가 의견 입력
- [ ] "결과 저장하기" 버튼 작동
- [ ] 저장 완료 메시지 표시
- [ ] "새 배합비 추천받기" 버튼으로 초기화

### 네비게이션
- [ ] StepIndicator로 단계 간 이동 가능
- [ ] 완료된 단계는 클릭 가능 (파란색)
- [ ] 미완료 단계는 비활성화 (회색)
- [ ] "이전 단계" 버튼 작동
- [ ] "새로 시작" 버튼으로 완전 초기화

---

## 빠른 테스트용 데이터

### 테스트 세트 A (간단)
```
제품명: 테스트 정제
제형: 정제
원료: 비타민C (필수)
```

### 테스트 세트 B (중간)
```
제품명: 종합비타민
제형: 정제
목표 원가: 12000
원료1: 비타민C (필수, 최소 30%)
원료2: 아연 (필수, 최소 10%)
원료3: 비타민D (선택)
최대 원료 수: 10
```

### 테스트 세트 C (복잡)
```
제품명: 프리미엄 면역력 컴플렉스
제형: 연질캡슐
목표 원가: 30000
목표 중량: 1500
제품 설명: 면역력 강화를 위한 프리미엄 복합 제품
원료1: 비타민C (필수, 최소 25%, 최대 40%)
원료2: 아연 킬레이트 (필수, 최소 15%, 최대 25%)
원료3: 비타민D3 (필수, 최소 10%, 최대 20%)
원료4: 셀레늄 (선택, 최소 5%, 최대 10%)
원료5: 프로폴리스 (선택, 최소 5%, 최대 15%)
최대 원료 수: 12
피해야 할 원료: 이산화티타늄, 합성착색료, 보존료
품질 요구사항: 특허 원료, 프리미엄 킬레이트, 고함량
```

---

## 예상 결과 검증 포인트

### 1. 프롬프트 품질
- [ ] 제품 정보가 정확하게 포함되었는가?
- [ ] 원료 요구사항이 상세히 기술되었는가?
- [ ] 제약 조건이 명확히 전달되었는가?
- [ ] SQL 쿼리가 적절한가?
- [ ] 유사제품 목록이 포함되었는가?

### 2. AI 응답 품질 (Mock)
- [ ] 3가지 옵션이 모두 생성되는가?
- [ ] 각 옵션이 명확히 구분되는가?
- [ ] 배합비 총합이 100%인가?
- [ ] 원가 정보가 표시되는가?
- [ ] 제조 주의사항이 있는가?

### 3. 파싱 정확도
- [ ] 마크다운 테이블 → JSON 변환 성공
- [ ] 모든 원료 정보 추출됨
- [ ] 예상 원가 파싱 성공
- [ ] 주의사항/품질 정보 파싱 성공

### 4. UI/UX
- [ ] 로딩 상태 표시 명확
- [ ] 에러 메시지 명확
- [ ] 모든 버튼 작동
- [ ] 반응형 디자인 (모바일/데스크톱)
- [ ] 색상 대비 충분 (접근성)

---

## 버그 재현 시나리오

### 버그 시나리오 1: 빈 원료로 검색
1. 원료명을 입력하지 않고 검색
2. **예상**: 빈 원료는 자동으로 필터링됨

### 버그 시나리오 2: 옵션 선택 없이 저장
1. 결과 화면에서 옵션 선택하지 않고 "결과 저장하기" 클릭
2. **예상**: "옵션과 평점을 선택해주세요." 에러 메시지

### 버그 시나리오 3: 평점 없이 저장
1. 옵션만 선택하고 평점 선택하지 않음
2. "결과 저장하기" 클릭
3. **예상**: "옵션과 평점을 선택해주세요." 에러 메시지

---

## 실전 사용 플로우

### 완전한 워크플로우 테스트
```
[입력] → [검색] → [프롬프트] → [AI 생성] → [결과 확인] → [저장] → [새로 시작]
   ↓        ↓         ↓           ↓            ↓           ↓         ↓
  3분      5초       2초        10초          2분         3초       1초
```

**총 소요 시간**: 약 8-10분 (AI 응답 포함)

### 체크포인트
1. ✅ 모든 단계가 순차적으로 진행되는가?
2. ✅ 각 단계에서 이전 단계로 돌아갈 수 있는가?
3. ✅ StepIndicator로 완료된 단계로 점프 가능한가?
4. ✅ 에러 발생 시 적절한 메시지가 표시되는가?
5. ✅ 새로 시작 시 모든 상태가 초기화되는가?

---

## 테스트 완료 후 확인사항

### 데이터 확인
- [ ] 피드백이 DB에 저장되었는가? (backend 로그 확인)
- [ ] 프롬프트 히스토리가 기록되는가?

### 성능 확인
- [ ] 메모리 사용량 정상 범위
- [ ] CPU 사용량 급증 없음
- [ ] 네트워크 요청 최적화

### 로그 확인
```bash
# 백엔드 로그 확인
tail -f C:\Users\solut\AppData\Local\Temp\claude\c--dev-triflow-ai\tasks\bfcada4.output

# 특정 에러 검색
grep -i "error\|exception" 로그파일
```

---

## 다음 개선 사항 (선택)

테스트 중 발견된 개선 포인트:
- [ ] 원료 비율 합계 실시간 계산
- [ ] 배합비 히스토리 저장
- [ ] 배합비 비교 기능
- [ ] 엑셀 다운로드
- [ ] 인쇄 기능
- [ ] 즐겨찾기 기능
