# AWS 비용 계산기
**프로젝트**: TriFlow AI
**작성일**: 2026년 1월 20일
**환율**: $1 = ₩1,300

---

## 📊 월간 비용 상세 (Production)

### 1. ECS Fargate (컴퓨팅)

| 항목 | 사양 | 단가 | 사용량 | 비용/월 |
|------|------|-----:|-------:|--------:|
| vCPU | 1 vCPU | $0.04048/시간 | 730시간 | $29.55 |
| Memory | 2 GB | $0.004445/GB/시간 | 1,460 GB·시간 | $6.49 |
| **Task 1개 비용** | - | - | - | **$36.04** |
| | | | | **₩46,852** |
| **Task 2개 (상시)** | Min: 2 tasks | - | - | **₩93,704** |

**Auto Scaling 시나리오**:
```
시나리오 1: 평균 2 tasks (야간 2, 주간 2)
- 비용: ₩93,704/월

시나리오 2: 평균 3 tasks (야간 2, 주간 4)
- 비용: ₩140,556/월

시나리오 3: 평균 4 tasks (야간 2, 주간 5)
- 비용: ₩187,408/월
```

**권장 설정**: Min:2, Desired:2, Max:5 → **₩93,704/월** (기본)

---

### 2. RDS PostgreSQL (데이터베이스)

#### 인스턴스 비용

| 인스턴스 | Single-AZ (On-Demand) | Multi-AZ (On-Demand) | Multi-AZ (RI 1년) | 선택 |
|----------|----------------------:|---------------------:|------------------:|:----:|
| db.t4g.micro | ₩50,000 | ₩100,000 | ₩60,000 | ❌ |
| db.t4g.small | ₩80,000 | ₩160,000 | ₩96,000 | 🟡 |
| **db.t4g.medium** | ₩160,000 | ₩320,000 | **₩192,000** | ✅ |
| db.t4g.large | ₩320,000 | ₩640,000 | ₩384,000 | ❌ |

**선택**: db.t4g.medium Multi-AZ, Reserved Instance (1년 All Upfront)

#### 스토리지 비용

| 항목 | 사양 | 단가 | 용량 | 비용/월 |
|------|------|-----:|-----:|--------:|
| **gp3 스토리지** | 100 GB | ₩143/GB | 100 GB | ₩14,300 |
| IOPS (기본) | 3,000 IOPS | 포함 | - | ₩0 |
| Throughput (기본) | 125 MiB/s | 포함 | - | ₩0 |

#### 백업 비용

| 항목 | 용량 | 단가 | 비용/월 |
|------|-----:|-----:|--------:|
| 자동 백업 (7일) | 100 GB | 포함 | ₩0 |
| 추가 스냅샷 | 100 GB | ₩124/GB | ₩12,400 |

#### RDS 총 비용

```
인스턴스: ₩192,000/월 (RI)
스토리지: ₩14,300/월
백업: ₩12,400/월 (수동 스냅샷)
───────────────────────
합계: ₩218,700/월
```

**Reserved Instance 선불금**: ₩300,000 (1년, All Upfront)
**ROI**: ₩300,000 ÷ (₩320,000 - ₩192,000) = 2.3개월

---

### 3. S3 (스토리지)

#### 스토리지 비용 (50GB 예상)

| 스토리지 클래스 | 용량 | 단가/GB | 비용/월 |
|----------------|-----:|--------:|--------:|
| **Standard** (0-90일) | 10 GB | ₩30 | ₩300 |
| **Glacier** (90일 이후) | 40 GB | ₩5 | ₩200 |
| **총 스토리지** | 50 GB | - | **₩500** |

#### 요청 비용

| 요청 타입 | 월간 요청 수 | 단가/1000 req | 비용/월 |
|----------|------------:|-------------:|--------:|
| PUT | 10,000 | ₩6.5 | ₩65 |
| GET | 50,000 | ₩0.52 | ₩26 |
| **총 요청** | 60,000 | - | **₩91** |

#### S3 총 비용

```
스토리지: ₩500/월
요청: ₩91/월
───────────────
합계: ₩591/월 ≈ ₩600/월
```

---

### 4. Application Load Balancer

#### ALB 기본 비용

| 항목 | 단가 | 사용량 | 비용/월 |
|------|-----:|-------:|--------:|
| **ALB 시간** | ₩29/시간 | 730시간 | ₩21,170 |

#### LCU (Load Balancer Capacity Units)

| 차원 | 예상 사용량 | LCU 환산 | 비율 |
|------|------------|---------|-----:|
| 신규 연결/초 | 10/sec | 0.025 | 6% |
| 활성 연결 | 50개 | 0.1 | 25% |
| 처리 대역폭 | 10 Mbps | 0.04 | 10% |
| Rule 평가/초 | 100/sec | 0.1 | 25% |

**최대 LCU**: 0.1 (활성 연결 기준)
**LCU 비용**: 0.1 × ₩10/LCU/시간 × 730시간 = ₩730/월

#### ALB 총 비용

```
고정 비용: ₩21,170/월
LCU 비용: ₩730/월
─────────────────
합계: ₩21,900/월 ≈ ₩22,000/월
```

---

### 5. NAT Gateway

| 항목 | 단가 | 사용량 | 비용/월 |
|------|-----:|-------:|--------:|
| **NAT 시간** | ₩59/시간 | 730시간 | ₩43,070 |
| **데이터 처리** | ₩59/GB | 1 GB | ₩59 |

**총 비용**: ₩43,129/월 ≈ **₩43,000/월**

**트래픽 분석**:
- Anthropic API 호출: ~500 req/day × 10KB = 5MB/day = 150MB/month
- 기타 외부 API: ~50MB/month
- 합계: ~200MB/month ≈ 0.2GB

**비용 최적화**:
- VPC Endpoint (S3) 사용 시 NAT 트래픽 감소
- 절감: ₩10,000/월 (NAT 데이터 처리 비용)
- 추가 비용: VPC Endpoint ₩10,000/월
- 순 효과: ₩0 (동일)

**결론**: 초기에는 NAT만 사용, VPC Endpoint는 트래픽 증가 시 고려

---

### 6. CloudWatch (모니터링)

#### Logs 비용

| 항목 | 용량/요청 | 단가 | 비용/월 |
|------|----------|-----:|--------:|
| **Logs Ingestion** | 10 GB | ₩650/GB | ₩6,500 |
| **Logs Storage** (15일) | 10 GB | ₩39/GB | ₩390 |
| **총 Logs** | - | - | **₩6,890** |

#### Metrics & Alarms

| 항목 | 개수 | 단가 | 비용/월 |
|------|-----:|-----:|--------:|
| **기본 메트릭** | 30개 | 무료 | ₩0 |
| **커스텀 메트릭** | 0개 (초기) | ₩130/개 | ₩0 |
| **Alarms** | 10개 | ₩130/개 | ₩1,300 |

#### CloudWatch 총 비용

```
Logs: ₩6,890/월
Alarms: ₩1,300/월
──────────────
합계: ₩8,190/월 ≈ ₩8,200/월
```

---

### 7. Route 53 (DNS)

| 항목 | 수량 | 단가 | 비용/월 |
|------|-----:|-----:|--------:|
| **Hosted Zone** | 1개 | ₩650/월 | ₩650 |
| **DNS Queries** | 1M/월 | ₩650/1M | ₩650 |

**총 비용**: ₩1,300/월

---

### 8. 데이터 전송 (Data Transfer)

| 방향 | 용량 | 단가 | 비용/월 |
|------|-----:|-----:|--------:|
| **인바운드** | 무제한 | 무료 | ₩0 |
| **아웃바운드** (처음 10GB) | 10 GB | 무료 | ₩0 |
| **아웃바운드** (10GB 이후) | 5 GB | ₩117/GB | ₩585 |
| **AZ 간 전송** | 5 GB | ₩13/GB | ₩65 |

**총 비용**: ₩650/월 ≈ **₩1,000/월**

**트래픽 예상**:
- Frontend (CDN 미사용): ~10GB/월
- API 응답: ~3GB/월
- S3 다운로드: ~2GB/월

---

## 💰 총 비용 요약

### On-Demand (약정 없음)

| 서비스 | 비용/월 | 비율 |
|--------|--------:|-----:|
| ECS Fargate (2 tasks) | ₩93,704 | 19% |
| RDS PostgreSQL (Multi-AZ) | ₩346,700 | 69% |
| S3 | ₩600 | 0.1% |
| ALB | ₩22,000 | 4% |
| NAT Gateway | ₩43,000 | 9% |
| CloudWatch | ₩8,200 | 2% |
| Route 53 | ₩1,300 | 0.3% |
| Data Transfer | ₩1,000 | 0.2% |
| **총계 (On-Demand)** | **₩516,504** | 100% |

### Reserved Instances (1년 약정)

| 서비스 | On-Demand | Reserved (RI) | 절감액 | 절감률 |
|--------|----------:|--------------:|-------:|-------:|
| ECS Fargate | ₩93,704 | ₩93,704 | ₩0 | 0% (RI 없음) |
| **RDS PostgreSQL** | ₩346,700 | **₩218,700** | ₩128,000 | **37%** |
| S3 | ₩600 | ₩600 | ₩0 | - |
| ALB | ₩22,000 | ₩22,000 | ₩0 | - |
| NAT Gateway | ₩43,000 | ₩43,000 | ₩0 | - |
| CloudWatch | ₩8,200 | ₩8,200 | ₩0 | - |
| Route 53 | ₩1,300 | ₩1,300 | ₩0 | - |
| Data Transfer | ₩1,000 | ₩1,000 | ₩0 | - |
| **총계 (RI)** | ₩516,504 | **₩388,504** | **₩128,000** | **25%** |

### Reserved Instance 선불금

| 리소스 | 약정 기간 | 결제 방식 | 선불금 | 월 비용 | 총 비용 (1년) |
|--------|----------|----------|-------:|--------:|--------------:|
| RDS db.t4g.medium (Multi-AZ) | 1년 | All Upfront | ₩300,000 | ₩0 (선불 포함) | ₩300,000 |
| 인스턴스 비용만 | - | - | - | ₩192,000 | ₩2,304,000 |
| 스토리지 + 백업 | - | - | - | ₩26,700 | ₩320,400 |

**RI 선불금**: ₩300,000 (1회)
**RI 효과**: 월 ₩128,000 절감 → 2.3개월 만에 회수

---

## 📈 연간 비용 예측

### 시나리오 1: On-Demand (약정 없음)

```
월 비용: ₩516,504
연간 비용: ₩516,504 × 12 = ₩6,198,048
```

### 시나리오 2: Reserved Instance (권장)

```
선불금: ₩300,000 (1회)
월 비용: ₩388,504
연간 비용: ₩300,000 + (₩388,504 × 12) = ₩4,962,048

절감액: ₩6,198,048 - ₩4,962,048 = ₩1,236,000/년 (20%)
```

---

## 🎯 환경별 비용

### Development 환경

| 서비스 | 사양 | 비용/월 |
|--------|------|--------:|
| ECS Fargate | 0.5 vCPU, 1GB × 1 task | ₩23,426 |
| RDS PostgreSQL | db.t4g.micro (Single-AZ) | ₩50,000 |
| S3 | 공유 버킷 (dev/ 폴더) | ₩100 |
| ALB | 공유 (Prod ALB) | ₩0 |
| NAT | 공유 (Prod NAT) | ₩0 |
| CloudWatch | 기본 메트릭 | ₩1,000 |
| **총계** | - | **₩74,526** |

**최적화**: 야간 자동 중단 (18:00-09:00, 15시간)
- 절감: ₩23,426 × 15/24 = ₩14,641/월
- **최적화 후**: ₩59,885/월

### Staging 환경

| 서비스 | 사양 | 비용/월 |
|--------|------|--------:|
| ECS Fargate | 1 vCPU, 2GB × 1 task | ₩46,852 |
| RDS PostgreSQL | db.t4g.small (Single-AZ) | ₩80,000 |
| S3 | 공유 버킷 (staging/ 폴더) | ₩200 |
| ALB | 공유 (Prod ALB, 별도 리스너) | ₩5,000 |
| NAT | 공유 (Prod NAT) | ₩0 |
| CloudWatch | 기본 메트릭 | ₩2,000 |
| **총계** | - | **₩134,052** |

**최적화**: 배포 테스트 시만 실행 (주 5일, 8시간)
- 사용 시간: 40시간/월 (vs 730시간)
- 절감: ₩46,852 × (730-40)/730 = ₩44,260/월
- **최적화 후**: ₩89,792/월

### 전체 환경 비용 (Dev + Staging + Prod)

```
Production: ₩388,504/월
Development: ₩59,885/월 (최적화)
Staging: ₩89,792/월 (최적화)
────────────────────────────
총계: ₩538,181/월
```

---

## 💡 비용 최적화 전략

### 1. Reserved Instances (구현 완료)
✅ RDS: 37% 절감 (₩128,000/월)
❌ ECS Fargate: RI 미지원 (Savings Plan 고려)

### 2. Savings Plan (대안)

| 플랜 | 약정 | 할인율 | 적용 대상 |
|------|------|-------:|----------|
| Compute Savings Plan | 1년 | 17% | ECS Fargate, Lambda, Fargate |
| EC2 Instance Savings Plan | 1년 | 28% | EC2만 (ECS 미적용) |

**ECS Fargate Savings Plan**:
- 약정: $60/월 (₩78,000/월)
- 할인: 17% → ₩93,704 → ₩77,774/월
- 절감: ₩15,930/월 (₩191,160/년)

**권장**: 3개월 후 도입 (사용 패턴 파악 후)

### 3. 야간 자동 중단 (Dev/Staging)
✅ Development: ₩14,641/월 절감
✅ Staging: ₩44,260/월 절감
**합계**: ₩58,901/월 절감 (₩706,812/년)

### 4. S3 Lifecycle (구현 예정)
✅ 90일 후 Glacier: 80% 절감
**절감**: ₩1,200/월 (₩14,400/년)

### 5. RDS Auto Scaling Storage
- 초기: 100GB → 필요 시 200GB
- 85% 사용 시 자동 확장
- 비용 절감: 초기 과다 투자 방지

### 6. VPC Endpoint (추가 고려)

| Endpoint | 비용/월 | 절감 효과 | ROI |
|----------|--------:|----------|-----|
| S3 Gateway Endpoint | ₩0 (무료) | NAT 트래픽 감소 | ✅ 즉시 |
| ECR Interface Endpoint | ₩10,000 | NAT 트래픽 감소 | 🟡 6개월 |

**권장**: **S3 Gateway Endpoint 즉시 도입** (무료, NAT 절감)

---

## 📊 월간 비용 비교표

| 구분 | On-Demand | RI (RDS만) | RI + Savings Plan | RI + SP + 최적화 |
|------|----------:|-----------:|------------------:|----------------:|
| Production | ₩516,504 | ₩388,504 | ₩372,574 | ₩372,574 |
| Development | ₩74,526 | ₩74,526 | ₩74,526 | ₩59,885 |
| Staging | ₩134,052 | ₩134,052 | ₩134,052 | ₩89,792 |
| **총계** | ₩725,082 | ₩597,082 | ₩581,152 | **₩522,251** |
| **절감** | - | ₩128,000 | ₩143,930 | **₩202,831** |
| **절감률** | - | 18% | 20% | **28%** |

**최종 권장**: **RI + Savings Plan + 야간 중단** → 월 ₩522,251

---

## 🚨 비용 알람 설정

### CloudWatch Billing Alarms

| 알람 | 임계값 | 기간 | 액션 |
|------|-------:|------|------|
| **월 비용 경고** | ₩400,000 | 1일 | Slack 알림 |
| **월 비용 위험** | ₩500,000 | 1일 | Slack + Email + SMS |
| **일 비용 급증** | ₩20,000/일 | 1일 | Slack 알림 |

### 비용 모니터링 대시보드

```
┌─────────────────────────────────────────────────┐
│ AWS Cost Explorer - TriFlow AI                  │
├─────────────────────────────────────────────────┤
│                                                 │
│ 📊 이번 달 예상 비용: ₩388,504                  │
│ ├─ RDS: ₩218,700 (56%)                         │
│ ├─ ECS: ₩93,704 (24%)                          │
│ ├─ NAT: ₩43,000 (11%)                          │
│ ├─ ALB: ₩22,000 (6%)                           │
│ └─ 기타: ₩11,100 (3%)                          │
│                                                 │
│ 📈 지난 달 대비: +₩0 (신규)                     │
│ 🎯 예산: ₩500,000 (78% 사용)                   │
│ ⚠️ 알람: 없음                                  │
└─────────────────────────────────────────────────┘
```

### 주간 비용 리포트 (자동)

**매주 월요일 09:00 Slack 전송**:
```
📊 지난 주 AWS 비용 리포트 (1/13 - 1/19)

총 비용: ₩89,626 (주간)
예상 월 비용: ₩388,504

서비스별:
  🗄️ RDS: ₩50,505 (56%)
  🐳 ECS: ₩21,632 (24%)
  🚪 NAT: ₩9,930 (11%)
  ⚖️ ALB: ₩5,082 (6%)
  📊 CloudWatch: ₩1,893 (2%)
  기타: ₩584 (1%)

📈 전주 대비: +₩2,134 (+2.4%)
  원인: ECS Task 1개 추가 (Scale Out)

🎯 예산 준수: ✅ (78%)

자세한 내용: https://console.aws.amazon.com/cost-explorer
```

---

## 🔮 비용 예측 (향후 6개월)

### Phase별 예상 비용

| Phase | 기간 | 인프라 | 월 비용 | 총 비용 |
|-------|------|--------|--------:|--------:|
| **Phase 0-1** | 1-2월 | AWS 구축 | ₩388,504 × 2 | ₩777,008 |
| **RI 선불금** | 2월 | RDS RI | - | ₩300,000 (1회) |
| **Phase 2** | 3월 | 고객사 A 운영 | ₩388,504 | ₩388,504 |
| **Phase 3** | 4-5월 | 최적화 | ₩338,504 (ElastiCache 추가 시 ₩388,504) | ₩677,008 |
| **Phase 4** | 6월 | 고객사 B 추가 | ₩388,504 | ₩388,504 |
| **누적 (6개월)** | - | - | - | **₩2,531,024** |

**RI 선불금 포함 총 비용**: ₩2,531,024 + ₩300,000 = **₩2,831,024**

### On-Demand와 비교

```
On-Demand (6개월):
₩516,504 × 6 = ₩3,099,024

Reserved (6개월):
₩2,831,024 (RI 선불금 포함)

절감: ₩3,099,024 - ₩2,831,024 = ₩268,000 (9%)
```

**ROI**: 6개월 시점에서 RI 선불금 회수 완료

---

## 📉 비용 절감 로드맵

### 즉시 (Phase 0-1)
- [x] RDS Reserved Instance 구매 (₩128,000/월 절감)
- [x] S3 Gateway Endpoint 설정 (무료, NAT 절감)
- [x] Dev/Staging 야간 중단 (₩58,901/월 절감)

### 3개월 후 (Phase 3)
- [ ] ECS Fargate Savings Plan (₩15,930/월 절감)
- [ ] S3 Lifecycle → Glacier (₩1,200/월 절감)
- [ ] CloudWatch Logs → S3 Archive (₩5,000/월 절감)

### 6개월 후 (Phase 4+)
- [ ] Spot Instances (Dev/Staging, 70% 절감)
- [ ] Reserved Capacity (ALB, 10% 할인)
- [ ] Data Transfer 최적화 (CloudFront CDN 고려)

**목표**: 월 ₩520,000 → ₩350,000 (33% 절감)

---

## 🎯 비용 벤치마크

### 유사 프로젝트 비교

| 항목 | TriFlow AI (우리) | 평균 (유사 규모) | 평가 |
|------|------------------:|-----------------:|:----:|
| **사용자당 비용** | ₩3,885/명 (100명) | ₩5,000/명 | ✅ 양호 |
| **요청당 비용** | ₩0.13 (300만 req/월) | ₩0.20 | ✅ 우수 |
| **GB당 스토리지** | ₩12 (S3+RDS) | ₩15 | ✅ 양호 |

**결론**: 비용 효율적인 아키텍처 ✅

---

## 📅 월별 비용 트렌드 예상

```
₩600,000 ┤
         │
₩500,000 ┤ ●━━━━━━━━━━━━━━━━━━━━━━━━━━━━━●  On-Demand
         │  ╲                            ╱
₩400,000 ┤   ●━━━━━━━━━━━━━━━━━━━━━━━━●     Reserved + 최적화
         │    ╲                        ╱
₩300,000 ┤     ●                      ●       Reserved Only
         │      1월  2월  3월  4월  5월  6월
         └──────────────────────────────────

범례:
● On-Demand (₩516,504/월)
● Reserved Only (₩388,504/월)
● Reserved + 최적화 (₩350,000/월 목표)
```

---

**작성**: Solution Architecture Team
**검토**: CFO, Tech Lead
**승인**: Pending
